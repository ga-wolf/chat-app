{"id":"R0eE","dependencies":[{"name":"/Users/jackjeffress/Desktop/our-react-chat-app/node_modules/@supabase/supabase-js/dist/module/lib/SupabaseRealtimeClient.js.map","includedInParent":true,"mtime":1630063737500},{"name":"/Users/jackjeffress/Desktop/our-react-chat-app/node_modules/@supabase/supabase-js/src/lib/SupabaseRealtimeClient.ts","includedInParent":true,"mtime":1630063737552},{"name":"/Users/jackjeffress/Desktop/our-react-chat-app/package.json","includedInParent":true,"mtime":1630063738273},{"name":"/Users/jackjeffress/Desktop/our-react-chat-app/node_modules/@supabase/supabase-js/package.json","includedInParent":true,"mtime":1630063737426},{"name":"@supabase/realtime-js","loc":{"line":1,"column":29},"parent":"/Users/jackjeffress/Desktop/our-react-chat-app/node_modules/@supabase/supabase-js/dist/module/lib/SupabaseRealtimeClient.js","resolved":"/Users/jackjeffress/Desktop/our-react-chat-app/node_modules/@supabase/realtime-js/dist/module/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.SupabaseRealtimeClient=void 0;var e=require(\"@supabase/realtime-js\");class t{constructor(e,t,s){const r=\"*\"===s?`realtime:${t}`:`realtime:${t}:${s}`;this.subscription=e.channel(r)}getPayloadRecords(t){const s={new:{},old:{}};return\"INSERT\"!==t.type&&\"UPDATE\"!==t.type||(s.new=e.Transformers.convertChangeData(t.columns,t.record)),\"UPDATE\"!==t.type&&\"DELETE\"!==t.type||(s.old=e.Transformers.convertChangeData(t.columns,t.old_record)),s}on(e,t){return this.subscription.on(e,e=>{let s={schema:e.schema,table:e.table,commit_timestamp:e.commit_timestamp,eventType:e.type,new:{},old:{}};s=Object.assign(Object.assign({},s),this.getPayloadRecords(e)),t(s)}),this}subscribe(e=(()=>{})){return this.subscription.onError(t=>e(\"SUBSCRIPTION_ERROR\",t)),this.subscription.onClose(()=>e(\"CLOSED\")),this.subscription.subscribe().receive(\"ok\",()=>e(\"SUBSCRIBED\")).receive(\"error\",t=>e(\"SUBSCRIPTION_ERROR\",t)).receive(\"timeout\",()=>e(\"RETRYING_AFTER_TIMEOUT\")),this.subscription}}exports.SupabaseRealtimeClient=t;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":4,"column":35},"generated":{"line":1,"column":0}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":4,"column":35},"generated":{"line":1,"column":13}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":4,"column":35},"generated":{"line":1,"column":20}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":4,"column":35},"generated":{"line":1,"column":35}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":4,"column":35},"generated":{"line":1,"column":43}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":4,"column":35},"generated":{"line":1,"column":56}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":4,"column":35},"generated":{"line":1,"column":57}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":4,"column":35},"generated":{"line":1,"column":64}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":4,"column":35},"generated":{"line":1,"column":68}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":4,"column":35},"generated":{"line":1,"column":76}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":4,"column":35},"generated":{"line":1,"column":104}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":106}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":110}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":112}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":120}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":4,"column":6},"generated":{"line":1,"column":145}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":4,"column":13},"generated":{"line":1,"column":151}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":7,"column":2},"generated":{"line":1,"column":153}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":7,"column":14},"generated":{"line":1,"column":165}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":7,"column":38},"generated":{"line":1,"column":167}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":7,"column":54},"generated":{"line":1,"column":169}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":8,"column":10},"generated":{"line":1,"column":172}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":8,"column":10},"generated":{"line":1,"column":178}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":8,"column":32},"generated":{"line":1,"column":180}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":8,"column":18},"generated":{"line":1,"column":186}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":8,"column":50},"generated":{"line":1,"column":200}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":8,"column":73},"generated":{"line":1,"column":216}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":8,"column":83},"generated":{"line":1,"column":221}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":9,"column":9},"generated":{"line":1,"column":225}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":9,"column":9},"generated":{"line":1,"column":230}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":9,"column":24},"generated":{"line":1,"column":243}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":9,"column":31},"generated":{"line":1,"column":245}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":9,"column":39},"generated":{"line":1,"column":253}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":12,"column":10},"generated":{"line":1,"column":256}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":12,"column":28},"generated":{"line":1,"column":274}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":13,"column":10},"generated":{"line":1,"column":277}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":13,"column":10},"generated":{"line":1,"column":283}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":13,"column":20},"generated":{"line":1,"column":285}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":14,"column":6},"generated":{"line":1,"column":286}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":14,"column":11},"generated":{"line":1,"column":290}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":15,"column":6},"generated":{"line":1,"column":293}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":15,"column":11},"generated":{"line":1,"column":297}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":26,"column":11},"generated":{"line":1,"column":301}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":18,"column":25},"generated":{"line":1,"column":307}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":18,"column":8},"generated":{"line":1,"column":318}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":18,"column":16},"generated":{"line":1,"column":320}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":18,"column":54},"generated":{"line":1,"column":326}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":18,"column":37},"generated":{"line":1,"column":337}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":18,"column":45},"generated":{"line":1,"column":339}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":19,"column":6},"generated":{"line":1,"column":346}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":19,"column":14},"generated":{"line":1,"column":348}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":19,"column":20},"generated":{"line":1,"column":352}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":19,"column":33},"generated":{"line":1,"column":354}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":19,"column":33},"generated":{"line":1,"column":367}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":19,"column":51},"generated":{"line":1,"column":385}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":19,"column":59},"generated":{"line":1,"column":387}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":19,"column":68},"generated":{"line":1,"column":395}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":19,"column":76},"generated":{"line":1,"column":397}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":22,"column":25},"generated":{"line":1,"column":406}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":22,"column":8},"generated":{"line":1,"column":417}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":22,"column":16},"generated":{"line":1,"column":419}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":22,"column":54},"generated":{"line":1,"column":425}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":22,"column":37},"generated":{"line":1,"column":436}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":22,"column":45},"generated":{"line":1,"column":438}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":23,"column":6},"generated":{"line":1,"column":445}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":23,"column":14},"generated":{"line":1,"column":447}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":23,"column":20},"generated":{"line":1,"column":451}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":23,"column":33},"generated":{"line":1,"column":453}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":23,"column":33},"generated":{"line":1,"column":466}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":23,"column":51},"generated":{"line":1,"column":484}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":23,"column":59},"generated":{"line":1,"column":486}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":23,"column":68},"generated":{"line":1,"column":494}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":23,"column":76},"generated":{"line":1,"column":496}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":26,"column":11},"generated":{"line":1,"column":509}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":35,"column":2},"generated":{"line":1,"column":511}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":35,"column":5},"generated":{"line":1,"column":514}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":35,"column":32},"generated":{"line":1,"column":516}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":50,"column":11},"generated":{"line":1,"column":519}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":36,"column":9},"generated":{"line":1,"column":526}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":36,"column":9},"generated":{"line":1,"column":531}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":36,"column":22},"generated":{"line":1,"column":544}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":36,"column":25},"generated":{"line":1,"column":547}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":36,"column":33},"generated":{"line":1,"column":549}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":37,"column":10},"generated":{"line":1,"column":553}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":37,"column":10},"generated":{"line":1,"column":557}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":37,"column":58},"generated":{"line":1,"column":559}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":38,"column":8},"generated":{"line":1,"column":560}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":38,"column":16},"generated":{"line":1,"column":567}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":38,"column":24},"generated":{"line":1,"column":569}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":1,"column":576}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":39,"column":15},"generated":{"line":1,"column":582}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":39,"column":23},"generated":{"line":1,"column":584}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":40,"column":8},"generated":{"line":1,"column":590}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":40,"column":26},"generated":{"line":1,"column":607}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":40,"column":34},"generated":{"line":1,"column":609}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":41,"column":8},"generated":{"line":1,"column":626}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":41,"column":19},"generated":{"line":1,"column":636}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":41,"column":27},"generated":{"line":1,"column":638}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":42,"column":8},"generated":{"line":1,"column":643}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":42,"column":13},"generated":{"line":1,"column":647}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":1,"column":650}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":43,"column":13},"generated":{"line":1,"column":654}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":46,"column":6},"generated":{"line":1,"column":658}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":46,"column":21},"generated":{"line":1,"column":660}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":46,"column":21},"generated":{"line":1,"column":667}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":46,"column":21},"generated":{"line":1,"column":674}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":46,"column":21},"generated":{"line":1,"column":681}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":46,"column":21},"generated":{"line":1,"column":688}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":46,"column":29},"generated":{"line":1,"column":691}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":46,"column":49},"generated":{"line":1,"column":694}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":46,"column":54},"generated":{"line":1,"column":699}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":46,"column":72},"generated":{"line":1,"column":717}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":48,"column":6},"generated":{"line":1,"column":721}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":48,"column":15},"generated":{"line":1,"column":723}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":50,"column":11},"generated":{"line":1,"column":728}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":56,"column":2},"generated":{"line":1,"column":733}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":56,"column":12},"generated":{"line":1,"column":743}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":56,"column":33},"generated":{"line":1,"column":745}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":64,"column":11},"generated":{"line":1,"column":755}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":57,"column":9},"generated":{"line":1,"column":762}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":57,"column":9},"generated":{"line":1,"column":767}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":57,"column":22},"generated":{"line":1,"column":780}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":57,"column":31},"generated":{"line":1,"column":788}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":57,"column":44},"generated":{"line":1,"column":791}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":57,"column":53},"generated":{"line":1,"column":793}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":57,"column":75},"generated":{"line":1,"column":814}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":58,"column":9},"generated":{"line":1,"column":818}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":58,"column":9},"generated":{"line":1,"column":823}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":58,"column":22},"generated":{"line":1,"column":836}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":58,"column":30},"generated":{"line":1,"column":844}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":58,"column":36},"generated":{"line":1,"column":848}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":58,"column":45},"generated":{"line":1,"column":850}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":59,"column":9},"generated":{"line":1,"column":861}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":59,"column":9},"generated":{"line":1,"column":866}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":60,"column":7},"generated":{"line":1,"column":879}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":61,"column":7},"generated":{"line":1,"column":891}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":61,"column":15},"generated":{"line":1,"column":899}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":61,"column":21},"generated":{"line":1,"column":904}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":61,"column":27},"generated":{"line":1,"column":908}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":61,"column":36},"generated":{"line":1,"column":910}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":62,"column":7},"generated":{"line":1,"column":925}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":62,"column":15},"generated":{"line":1,"column":933}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":62,"column":25},"generated":{"line":1,"column":941}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":62,"column":38},"generated":{"line":1,"column":944}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":62,"column":47},"generated":{"line":1,"column":946}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":62,"column":69},"generated":{"line":1,"column":967}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":63,"column":7},"generated":{"line":1,"column":971}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":63,"column":15},"generated":{"line":1,"column":979}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":63,"column":26},"generated":{"line":1,"column":989}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":63,"column":32},"generated":{"line":1,"column":993}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":63,"column":41},"generated":{"line":1,"column":995}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":64,"column":11},"generated":{"line":1,"column":1022}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":64,"column":16},"generated":{"line":1,"column":1027}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":4,"column":35},"generated":{"line":1,"column":1041}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":4,"column":35},"generated":{"line":1,"column":1049}},{"source":"../../../src/lib/SupabaseRealtimeClient.ts","name":null,"original":{"line":4,"column":35},"generated":{"line":1,"column":1072}}],"sources":{"../../../src/lib/SupabaseRealtimeClient.ts":"import { RealtimeSubscription, RealtimeClient, Transformers } from '@supabase/realtime-js'\nimport { SupabaseEventTypes, SupabaseRealtimePayload } from './types'\n\nexport class SupabaseRealtimeClient {\n  subscription: RealtimeSubscription\n\n  constructor(socket: RealtimeClient, schema: string, tableName: string) {\n    const topic = tableName === '*' ? `realtime:${schema}` : `realtime:${schema}:${tableName}`\n    this.subscription = socket.channel(topic)\n  }\n\n  private getPayloadRecords(payload: any) {\n    const records = {\n      new: {},\n      old: {},\n    }\n\n    if (payload.type === 'INSERT' || payload.type === 'UPDATE') {\n      records.new = Transformers.convertChangeData(payload.columns, payload.record)\n    }\n\n    if (payload.type === 'UPDATE' || payload.type === 'DELETE') {\n      records.old = Transformers.convertChangeData(payload.columns, payload.old_record)\n    }\n\n    return records\n  }\n\n  /**\n   * The event you want to listen to.\n   *\n   * @param event The event\n   * @param callback A callback function that is called whenever the event occurs.\n   */\n  on(event: SupabaseEventTypes, callback: (payload: SupabaseRealtimePayload<any>) => void) {\n    this.subscription.on(event, (payload: any) => {\n      let enrichedPayload: SupabaseRealtimePayload<any> = {\n        schema: payload.schema,\n        table: payload.table,\n        commit_timestamp: payload.commit_timestamp,\n        eventType: payload.type,\n        new: {},\n        old: {},\n      }\n\n      enrichedPayload = { ...enrichedPayload, ...this.getPayloadRecords(payload) }\n\n      callback(enrichedPayload)\n    })\n    return this\n  }\n\n  /**\n   * Enables the subscription.\n   */\n  subscribe(callback: Function = () => {}) {\n    this.subscription.onError((e: Error) => callback('SUBSCRIPTION_ERROR', e))\n    this.subscription.onClose(() => callback('CLOSED'))\n    this.subscription\n      .subscribe()\n      .receive('ok', () => callback('SUBSCRIBED'))\n      .receive('error', (e: Error) => callback('SUBSCRIPTION_ERROR', e))\n      .receive('timeout', () => callback('RETRYING_AFTER_TIMEOUT'))\n    return this.subscription\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"57fe8fa09a2c2ecf66b44998c838ac58","cacheData":{"env":{}}}